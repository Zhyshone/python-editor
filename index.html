<!-- Load Pyodide (Python in the browser) -->
<script src="https://cdn.jsdelivr.net/pyodide/v0.26.0/full/pyodide.js"></script>

<div style="font-family: Arial; padding: 10px;">
  <h3>Python Code Editor</h3>

  <textarea id="python-code" style="width:100%; height:200px; font-family: monospace;">
print("Hello, Python inside Canvas!")
  </textarea>

  <button onclick="runPythonCode()" 
          style="margin-top:10px; padding:8px 16px; font-size:16px;">
    Run â–¶
  </button>

  <h3>Output:</h3>
  <pre id="output" 
       style="background:#111; color:#0f0; padding:10px; height:200px; overflow:auto;">
  </pre>
</div>

<script>
let pyodideReady = false;
let pyodide;

async function loadPyodideAndSetup() {
    pyodide = await loadPyodide();
    pyodideReady = true;
    document.getElementById("output").textContent = "Python ready. Click Run.";
}

loadPyodideAndSetup();

async function runPythonCode() {
    if (!pyodideReady) {
        document.getElementById("output").textContent = "Loading Python, please wait...";
        return;
    }

    const code = document.getElementById("python-code").value;

    try {
        const result = await pyodide.runPythonAsync(code);
        document.getElementById("output").textContent = result ?? "";
    } catch (err) {
        document.getElementById("output").textContent = err;
    }
}
</script>
